<!DOCTYPE html>
<html lang="tr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Pomelita | YÃ¶netim Paneli</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Sacramento&family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  body { background-color: #F3F4F6; font-family: 'Quicksand', sans-serif; color: #374151; }
Â  Â  Â  Â  .brand-font { font-family: 'Sacramento', cursive; }
Â  Â  Â  Â  
Â  Â  Â  Â  /* GÄ°RÄ°Å EKRANI EFEKTLERÄ° */
Â  Â  Â  Â  #login-overlay {
Â  Â  Â  Â  Â  Â  background: rgba(15, 23, 42, 0.8);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  transition: all 0.5s ease-in-out;
Â  Â  Â  Â  }
Â  Â  Â  Â  .login-box { animation: dropIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
Â  Â  Â  Â  @keyframes dropIn { 0% { transform: scale(0.5) translateY(-50px); opacity: 0; } 100% { transform: scale(1) translateY(0); opacity: 1; } }
Â  Â  Â  Â  @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
Â  Â  Â  Â  .shake { animation: shake 0.3s ease-in-out; border-color: #ef4444 !important; }

Â  Â  Â  Â  /* ANA TASARIM */
Â  Â  Â  Â  .sidebar { width: 260px; background: white; height: 100vh; position: fixed; padding: 30px; box-shadow: 2px 0 20px rgba(0,0,0,0.05); overflow-y: auto; }
Â  Â  Â  Â  .main-content { margin-left: 260px; padding: 40px; transition: 0.3s; filter: blur(0px); }
Â  Â  Â  Â  .menu-item { display: block; padding: 12px 15px; margin-bottom: 10px; border-radius: 10px; font-weight: 700; color: #6B7280; transition: 0.3s; cursor: pointer; }
Â  Â  Â  Â  .menu-item:hover { background-color: #F9FAFB; color: #9F8CC2; }
Â  Â  Â  Â  .menu-item.active { background-color: #F4F0FF; color: #9F8CC2; }
Â  Â  Â  Â  .section { display: none; }
Â  Â  Â  Â  .section.active { display: block; animation: fadeIn 0.3s; }
Â  Â  Â  Â  @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
Â  Â  Â  Â  .form-input { width: 100%; padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px; margin-bottom: 15px; outline: none; transition: 0.3s; }
Â  Â  Â  Â  .form-input:focus { border-color: #9F8CC2; box-shadow: 0 0 0 3px rgba(159, 140, 194, 0.2); }
Â  Â  Â  Â  .form-textarea { width: 100%; padding: 12px; border: 1px solid #E5E7EB; border-radius: 8px; margin-bottom: 15px; outline: none; height: 100px; resize: none; font-family: 'Quicksand', sans-serif; }
Â  Â  Â  Â  .btn-save { background-color: #98DDCA; color: white; padding: 12px; border-radius: 8px; font-weight: 700; width: 100%; transition: 0.3s; cursor: pointer; }
Â  Â  Â  Â  .btn-save:hover { opacity: 0.9; transform: translateY(-2px); }
Â  Â  Â  Â  .btn-save:disabled { background-color: #ccc; cursor: not-allowed; transform: none; }
Â  Â  Â  Â  .settings-group { background: white; padding: 25px; border-radius: 15px; margin-bottom: 25px; border: 1px solid #E5E7EB; }
Â  Â  Â  Â  .settings-title { font-weight: 700; color: #9F8CC2; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; font-size: 1.1rem; } 
Â  Â  </style>
</head>
<body>

Â  Â  <div id="login-overlay" class="fixed inset-0 z-50 flex items-center justify-center">
Â  Â  Â  Â  <div class="login-box bg-white p-10 rounded-3xl shadow-2xl w-96 text-center relative overflow-hidden">
Â  Â  Â  Â  Â  Â  <div class="absolute -top-10 -right-10 w-32 h-32 bg-purple-100 rounded-full blur-2xl opacity-50"></div>
Â  Â  Â  Â  Â  Â  <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-green-100 rounded-full blur-2xl opacity-50"></div>

Â  Â  Â  Â  Â  Â  <div class="relative z-10">
Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="brand-font text-6xl text-[#9F8CC2] mb-2">Pomelita</h1>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-400 text-xs tracking-[0.3em] font-bold mb-8 uppercase">YÃ¶netici GiriÅŸi</p>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-4 relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-user absolute left-4 top-4 text-gray-300"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="adminEmail" placeholder="E-posta" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:border-purple-400 focus:bg-white transition-all text-gray-700 font-bold"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  required>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6 relative">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-lock absolute left-4 top-4 text-gray-300"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="adminPass" placeholder="Åifreniz" 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:border-purple-400 focus:bg-white transition-all text-gray-700 font-bold tracking-widest"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onkeypress="if(event.key === 'Enter') checkLogin()">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="loginBtn" onclick="checkLogin()" class="w-full bg-gradient-to-r from-[#9F8CC2] to-[#B39CD0] hover:from-[#8E7BB0] hover:to-[#A28BC0] text-white font-bold py-3 rounded-xl shadow-lg transform transition active:scale-95">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  GÄ°RÄ°Å YAP <i class="fas fa-arrow-right ml-2"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <p id="errorMsg" class="text-red-500 text-xs font-bold mt-4 opacity-0 transition">HatalÄ± giriÅŸ bilgileri!</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="app-container" style="display: none;">
Â  Â  Â  Â  <div class="sidebar">
Â  Â  Â  Â  Â  Â  <div class="text-center mb-12">
Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="brand-font text-5xl text-[#9F8CC2]">Pomelita</h1>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-400 tracking-widest mt-2">YÃ–NETÄ°M V2.0</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <nav>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item active" onclick="switchTab('dashboard', this)"><i class="fas fa-chart-pie mr-3"></i> Ã–zet (Dashboard)</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="switchTab('siparisler', this)"><i class="fas fa-shopping-basket mr-3"></i> SipariÅŸler</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="switchTab('urunler', this)"><i class="fas fa-box-open mr-3"></i> ÃœrÃ¼nler & Stok</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="switchTab('kuponlar', this)"><i class="fas fa-ticket-alt mr-3"></i> Ä°ndirim KuponlarÄ±</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="switchTab('mesajlar', this)"><i class="fas fa-envelope mr-3"></i> Gelen Mesajlar</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="menu-item" onclick="switchTab('ayarlar', this)"><i class="fas fa-cog mr-3"></i> Site AyarlarÄ±</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="border-t my-4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="javascript:void(0)" onclick="logout()" class="menu-item text-red-500 hover:text-red-600"><i class="fas fa-sign-out-alt mr-3"></i> Ã‡Ä±kÄ±ÅŸ Yap</a>
Â  Â  Â  Â  Â  Â  </nav>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="main-content">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div id="tab-dashboard" class="section active">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-8">HoÅŸ Geldiniz, Patron! ğŸ‘‹</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-4 gap-6 mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-2xl shadow-sm flex items-center justify-between"><div class="bg-green-100 text-green-600 p-3 rounded-xl text-2xl"><i class="fas fa-lira-sign"></i></div><div><p class="text-gray-400 text-xs font-bold uppercase">Toplam Ciro</p><h3 id="d-ciro" class="text-2xl font-bold">0 TL</h3></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-2xl shadow-sm flex items-center justify-between"><div class="bg-blue-100 text-blue-600 p-3 rounded-xl text-2xl"><i class="fas fa-shopping-bag"></i></div><div><p class="text-gray-400 text-xs font-bold uppercase">Toplam SipariÅŸ</p><h3 id="d-siparis" class="text-2xl font-bold">0</h3></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-2xl shadow-sm flex items-center justify-between"><div class="bg-purple-100 text-purple-600 p-3 rounded-xl text-2xl"><i class="fas fa-gem"></i></div><div><p class="text-gray-400 text-xs font-bold uppercase">Toplam ÃœrÃ¼n</p><h3 id="d-urun" class="text-2xl font-bold">0</h3></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-2xl shadow-sm flex items-center justify-between"><div class="bg-red-100 text-red-600 p-3 rounded-xl text-2xl"><i class="fas fa-envelope"></i></div><div><p class="text-gray-400 text-xs font-bold uppercase">Mesajlar</p><h3 id="d-mesaj" class="text-2xl font-bold">0</h3></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-xl text-yellow-700 hidden" id="stok-uyari">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-exclamation-triangle mr-2"></i> <b>Dikkat:</b> BazÄ± Ã¼rÃ¼nlerin stoÄŸu 5'in altÄ±na dÃ¼ÅŸtÃ¼!
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="tab-siparisler" class="section">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-8">SipariÅŸler <span id="order-badge" class="bg-red-500 text-white text-sm px-2 py-1 rounded-full">0</span></h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="orderList" class="space-y-4"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="tab-urunler" class="section">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid lg:grid-cols-3 gap-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-4 text-[#9F8CC2]">ÃœrÃ¼n Ekle</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="addForm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">ÃœrÃ¼n AdÄ±</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="pName" class="form-input" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-2 gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div><label class="text-xs font-bold text-gray-400 uppercase">Fiyat</label><input type="text" id="pPrice" class="form-input" placeholder="599 TL" required></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div><label class="text-xs font-bold text-gray-400 uppercase">Stok</label><input type="number" id="pStock" class="form-input" placeholder="Adet" required></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Kategori</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="pCat" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="takilar">TakÄ±lar</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="kisisel">âœ¨ KiÅŸiselleÅŸtirilmiÅŸ ÃœrÃ¼nler</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="anneler">Anneler GÃ¼nÃ¼</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="sevgililer">Sevgililer GÃ¼nÃ¼</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="vazolar">Vazolar</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="standlar">Standlar</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="atolye">AtÃ¶lye</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-purple-500 uppercase">SEO AÃ§Ä±klamasÄ±</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="pDesc" class="form-textarea" placeholder="ÃœrÃ¼n aÃ§Ä±klamasÄ±..."></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">GÃ¶rsel Yolu (Link)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="pImg" class="form-input" placeholder="https://..." required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-save">KAYDET</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table class="w-full text-left">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr class="text-purple-400 border-b"><th class="pb-2">ÃœrÃ¼n</th><th class="pb-2">Stok</th><th class="pb-2">Sil</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="productList"></tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="tab-kuponlar" class="section">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-8">Kuponlar</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid lg:grid-cols-3 gap-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="couponForm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Kod</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="cCode" class="form-input uppercase" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Oran (%)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="cRate" class="form-input" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="btn-save bg-purple-400 hover:bg-purple-500">EKLE</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <table class="w-full text-left">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead><tr class="text-purple-400 border-b"><th class="pb-2">Kod</th><th class="pb-2">Oran</th><th class="pb-2">Ä°ÅŸlem</th></tr></thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="couponList"></tbody>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="tab-mesajlar" class="section">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-8">Gelen Mesajlar</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="messageList" class="space-y-4"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="tab-ayarlar" class="section">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-8">Site AyarlarÄ±</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <form id="settingsForm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="grid lg:grid-cols-2 gap-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="settings-title"><i class="fas fa-address-card"></i> Ä°letiÅŸim</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Telefon</label><input type="text" id="setTel" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">E-Posta</label><input type="email" id="setEmail" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Adres</label><textarea id="setAddress" class="form-textarea" style="height:80px;"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-group border-purple-200 bg-purple-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="settings-title text-purple-600"><i class="fab fa-google"></i> Google & Analiz</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-600 uppercase">Google Analytics ID</label><input type="text" id="setAnalytics" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-600 uppercase">Google Ads ID</label><input type="text" id="setAds" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="settings-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="settings-title"><i class="fas fa-share-alt"></i> Sosyal Medya</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Instagram</label><input type="text" id="setInsta" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-xs font-bold text-gray-400 uppercase">Facebook</label><input type="text" id="setFace" class="form-input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="fixed bottom-10 right-10">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="bg-green-500 text-white px-8 py-4 rounded-full font-bold shadow-xl hover:bg-green-600 transition flex items-center gap-2"><i class="fas fa-save"></i> AYARLARI KAYDET</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // --- API YardÄ±mcÄ±sÄ± (TÃ¼m isteklerde Token ekler ve Yetki HatasÄ± (401) yakalar) ---
Â  Â  Â  Â  async function fetchAPI(url, options = {}) {
Â  Â  Â  Â  Â  Â  const token = sessionStorage.getItem('authToken');
Â  Â  Â  Â  Â  Â  const headers = {
Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',
Â  Â  Â  Â  Â  Â  Â  Â  ...options.headers
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (token) {
Â  Â  Â  Â  Â  Â  Â  Â  headers['Authorization'] = `Bearer ${token}`; // Token'Ä± Authorization baÅŸlÄ±ÄŸÄ±na ekle
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const res = await fetch(url, { ...options, headers });

Â  Â  Â  Â  Â  Â  // 401 Unauthorized HatasÄ± (Yetkisiz/Oturum Bitti)
Â  Â  Â  Â  Â  Â  if (res.status === 401 || res.status === 403) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Oturumunuz sona ermiÅŸ veya yetkiniz yok. LÃ¼tfen tekrar giriÅŸ yapÄ±n.");
Â  Â  Â  Â  Â  Â  Â  Â  sessionStorage.clear();
Â  Â  Â  Â  Â  Â  Â  Â  window.location.reload(); 
Â  Â  Â  Â  Â  Â  Â  Â  return; 
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (!res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const text = await res.text();
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(text || `API HatasÄ±: ${res.status} ${res.statusText}`);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // DELETE ve PUT gibi yanÄ±tsÄ±z (No Content) istekleri boÅŸ dÃ¶ndÃ¼r
Â  Â  Â  Â  Â  Â  if (res.status === 204 || res.headers.get('content-length') === '0') {
Â  Â  Â  Â  Â  Â  Â  Â  return {};
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return res.json();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- GÄ°RÄ°Å KONTROL SÄ°STEMÄ° (ArtÄ±k GÃ¼venli) ---
Â  Â  Â  Â  async function checkLogin() {
Â  Â  Â  Â  Â  Â  const emailInput = document.getElementById('adminEmail');
Â  Â  Â  Â  Â  Â  const passInput = document.getElementById('adminPass');
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('loginBtn');
Â  Â  Â  Â  Â  Â  const errorMsg = document.getElementById('errorMsg');
Â  Â  Â  Â  Â  Â  const originalText = btn.innerHTML;

Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  btn.innerHTML = 'GiriÅŸ YapÄ±lÄ±yor...';
Â  Â  Â  Â  Â  Â  errorMsg.innerText = "Kontrol ediliyor...";
Â  Â  Â  Â  Â  Â  errorMsg.style.opacity = '1';

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/giris', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {'Content-Type': 'application/json'},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ email: emailInput.value, sifre: passInput.value }) 
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (data && data.token && data.user.rol === 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sessionStorage.setItem('authToken', data.token);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('login-overlay').style.opacity = '0';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('login-overlay').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('app-container').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchTab('dashboard', document.querySelector('.menu-item.active'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error("GiriÅŸ BaÅŸarÄ±sÄ±z.");
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  passInput.classList.add('shake');
Â  Â  Â  Â  Â  Â  Â  Â  passInput.style.borderColor = '#ef4444';
Â  Â  Â  Â  Â  Â  Â  Â  errorMsg.innerText = "HatalÄ± e-posta veya ÅŸifre!";
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => passInput.classList.remove('shake'), 300);
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = originalText;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function logout() {
Â  Â  Â  Â  Â  Â  sessionStorage.clear();
Â  Â  Â  Â  Â  Â  window.location.reload();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Sayfa yÃ¼klendiÄŸinde Token var mÄ± bak
Â  Â  Â  Â  window.onload = function() {
Â  Â  Â  Â  Â  Â  if (sessionStorage.getItem('authToken')) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('login-overlay').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('app-container').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  switchTab('dashboard', document.querySelector('.menu-item.active'));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- SEKME DEÄÄ°ÅTÄ°RME ---
Â  Â  Â  Â  function switchTab(tabName, element) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.getElementById('tab-' + tabName).classList.add('active');
Â  Â  Â  Â  Â  Â  if(element) element.classList.add('active');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (tabName === 'dashboard') loadDashboard();
Â  Â  Â  Â  Â  Â  if (tabName === 'siparisler') loadOrders();
Â  Â  Â  Â  Â  Â  if (tabName === 'urunler') loadProducts();
Â  Â  Â  Â  Â  Â  if (tabName === 'kuponlar') loadCoupons();
Â  Â  Â  Â  Â  Â  if (tabName === 'mesajlar') loadMessages();
Â  Â  Â  Â  Â  Â  if (tabName === 'ayarlar') loadSettings();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DASHBOARD ---
Â  Â  Â  Â  async function loadDashboard() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/dashboard');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('d-ciro').innerText = (data.toplamCiro || 0).toLocaleString('tr-TR') + ' TL';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('d-siparis').innerText = data.toplamSiparis || 0;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('d-urun').innerText = data.toplamUrun || 0;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('d-mesaj').innerText = data.okunmamisMesaj || 0;
Â  Â  Â  Â  Â  Â  Â  Â  if (data.kritikStok > 0) document.getElementById('stok-uyari').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  } catch (e) { console.error(e); }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- ÃœRÃœNLER ---
Â  Â  Â  Â  async function loadProducts() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/urunler');
Â  Â  Â  Â  Â  Â  Â  Â  const tbody = document.getElementById('productList');
Â  Â  Â  Â  Â  Â  Â  Â  if(!data || data.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-gray-400">Liste BoÅŸ</td></tr>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = data.map(p => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b last:border-0 hover:bg-gray-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3 pl-2 flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${p.img}" class="w-10 h-10 rounded object-cover border" onerror="this.src='https://via.placeholder.com/50'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm font-bold text-gray-700">${p.title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3 font-bold">${p.stok || 0} Adet</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3"><button onclick="deleteProduct('${p._id}')" class="text-red-400 hover:text-red-600"><i class="fas fa-trash"></i></button></td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  } catch(e) { console.error(e); }
Â  Â  Â  Â  }

Â  Â  Â  Â  document.getElementById('addForm').addEventListener('submit', async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const btn = document.querySelector('.btn-save');
Â  Â  Â  Â  Â  Â  const eskiYazi = btn.innerText;
Â  Â  Â  Â  Â  Â  btn.innerText = "â³ Kaydediliyor..."; btn.disabled = true;

Â  Â  Â  Â  Â  Â  const p = { 
Â  Â  Â  Â  Â  Â  Â  Â  title: document.getElementById('pName').value, 
Â  Â  Â  Â  Â  Â  Â  Â  price: document.getElementById('pPrice').value, 
Â  Â  Â  Â  Â  Â  Â  Â  stok: document.getElementById('pStock').value, 
Â  Â  Â  Â  Â  Â  Â  Â  category: document.getElementById('pCat').value, 
Â  Â  Â  Â  Â  Â  Â  Â  desc: document.getElementById('pDesc').value, 
Â  Â  Â  Â  Â  Â  Â  Â  img: document.getElementById('pImg').value 
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await fetchAPI('/api/urunler', {method:'POST', body:JSON.stringify(p)});
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  e.target.reset(); 
Â  Â  Â  Â  Â  Â  Â  Â  alert('âœ… ÃœrÃ¼n BaÅŸarÄ±yla Eklendi'); 
Â  Â  Â  Â  Â  Â  Â  Â  loadProducts();
Â  Â  Â  Â  Â  Â  } catch(err) { 
Â  Â  Â  Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  Â  Â  Â  alert('âŒ HATA: ÃœrÃ¼n eklenemedi! Sunucu hatasÄ±.'); 
Â  Â  Â  Â  Â  Â  } finally { 
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerText = eskiYazi; btn.disabled = false; 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  async function deleteProduct(id) {
Â  Â  Â  Â  Â  Â  if(confirm('Silmek istediÄŸine emin misin?')) {
Â  Â  Â  Â  Â  Â  Â  Â  await fetchAPI('/api/urunler/' + id, { method: 'DELETE' });
Â  Â  Â  Â  Â  Â  Â  Â  loadProducts();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SÄ°PARÄ°ÅLER ---
Â  Â  Â  Â  async function loadOrders() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/siparisler');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('order-badge').innerText = data.length || 0;
Â  Â  Â  Â  Â  Â  Â  Â  const container = document.getElementById('orderList');
Â  Â  Â  Â  Â  Â  Â  Â  if(!data || data.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<div class="text-center py-10 text-gray-400">SipariÅŸ yok.</div>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = data.map(o => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let statusColor = 'bg-gray-100 text-gray-600';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(o.durum === 'KargolandÄ±') statusColor = 'bg-blue-100 text-blue-600';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(o.durum === 'Teslim Edildi') statusColor = 'bg-green-100 text-green-600';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(o.durum === 'Ä°ptal') statusColor = 'bg-red-100 text-red-600';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-4 transition hover:shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-start mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-bold text-lg text-purple-600">${o.musteri?.ad} ${o.musteri?.soyad}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-400"><i class="far fa-clock"></i> ${o.tarih}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="font-bold text-xl text-green-600 mb-2">${(o.toplamTutar||0).toLocaleString('tr-TR')} TL</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="px-3 py-1 rounded-full text-xs font-bold ${statusColor}">${o.durum || 'Yeni SipariÅŸ'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-50 p-3 rounded-lg text-sm text-gray-600 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${o.sepet?.map(item => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between border-b border-gray-200 last:border-0 py-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${item.adet}x ${item.title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold">${item.price}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('') || 'Sepet boÅŸ'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-end items-center gap-3 bg-purple-50 p-2 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs font-bold text-purple-800 uppercase">Durum GÃ¼ncelle:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select onchange="updateOrderStatus('${o._id}', this.value)" class="text-sm border-none bg-white p-2 rounded shadow-sm outline-none cursor-pointer hover:text-purple-600">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled selected>SeÃ§iniz...</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="HazÄ±rlanÄ±yor">ğŸ“¦ HazÄ±rlanÄ±yor</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="KargolandÄ±">ğŸšš KargolandÄ±</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Teslim Edildi">âœ… Teslim Edildi</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Ä°ptal">âŒ Ä°ptal</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  Â  Â  } catch(e) { console.error(e); }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function updateOrderStatus(id, newStatus) {
Â  Â  Â  Â  Â  Â  if(!confirm('SipariÅŸ durumu "' + newStatus + '" olarak gÃ¼ncellensin mi?')) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await fetchAPI('/api/siparisler/' + id, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'PUT',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ durum: newStatus })
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  alert('Durum gÃ¼ncellendi!');
Â  Â  Â  Â  Â  Â  Â  Â  loadOrders(); 
Â  Â  Â  Â  Â  Â  } catch(e) { alert('Hata oluÅŸtu'); }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- KUPONLAR ---
Â  Â  Â  Â  async function loadCoupons() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/kuponlar');
Â  Â  Â  Â  Â  Â  Â  Â  const tbody = document.getElementById('couponList');
Â  Â  Â  Â  Â  Â  Â  Â  tbody.innerHTML = data.map(c => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr class="border-b">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3 font-bold font-mono">${c.kod}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3">%${c.oran}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td class="py-3"><button onclick="deleteCoupon('${c._id}')" class="text-red-400"><i class="fas fa-trash"></i></button></td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  } catch(e) { console.error(e); }
Â  Â  Â  Â  }

Â  Â  Â  Â  document.getElementById('couponForm').addEventListener('submit', async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const c = { kod: document.getElementById('cCode').value.toUpperCase(), oran: document.getElementById('cRate').value };
Â  Â  Â  Â  Â  Â  await fetchAPI('/api/kuponlar', {method:'POST', body:JSON.stringify(c)});
Â  Â  Â  Â  Â  Â  e.target.reset(); loadCoupons();
Â  Â  Â  Â  });

Â  Â  Â  Â  async function deleteCoupon(id) {
Â  Â  Â  Â  Â  Â  if(confirm('Sil?')) { await fetchAPI('/api/kuponlar/' + id, { method: 'DELETE' }); loadCoupons(); }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- MESAJLAR ---
Â  Â  Â  Â  async function loadMessages() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await fetchAPI('/api/mesajlar');
Â  Â  Â  Â  Â  Â  Â  Â  const container = document.getElementById('messageList');
Â  Â  Â  Â  Â  Â  Â  Â  if(!data || data.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<div class="text-center text-gray-400">Mesaj yok.</div>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = data.map(m => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-purple-400">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between mb-2"><h4 class="font-bold">${m.ad}</h4><span class="text-xs text-gray-400">${m.tarih}</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-600">${m.mesaj}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-purple-400 mt-2">${m.email}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  } catch(e) { console.error(e); }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- AYARLAR ---
Â  Â  Â  Â  async function loadSettings() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const s = await fetchAPI('/api/ayarlar');
Â  Â  Â  Â  Â  Â  Â  Â  if(s.tel) document.getElementById('setTel').value = s.tel;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.email) document.getElementById('setEmail').value = s.email;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.address) document.getElementById('setAddress').value = s.address;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.analytics) document.getElementById('setAnalytics').value = s.analytics;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.ads) document.getElementById('setAds').value = s.ads;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.insta) document.getElementById('setInsta').value = s.insta;
Â  Â  Â  Â  Â  Â  Â  Â  if(s.face) document.getElementById('setFace').value = s.face;
Â  Â  Â  Â  Â  Â  } catch(e) { console.error("Ayarlar yÃ¼klenemedi"); }
Â  Â  Â  Â  }

Â  Â  Â  Â  document.getElementById('settingsForm').addEventListener('submit', async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const s = {
Â  Â  Â  Â  Â  Â  Â  Â  tel: document.getElementById('setTel').value,
Â  Â  Â  Â  Â  Â  Â  Â  email: document.getElementById('setEmail').value,
Â  Â  Â  Â  Â  Â  Â  Â  address: document.getElementById('setAddress').value,
Â  Â  Â  Â  Â  Â  Â  Â  analytics: document.getElementById('setAnalytics').value,
Â  Â  Â  Â  Â  Â  Â  Â  ads: document.getElementById('setAds').value,
Â  Â  Â  Â  Â  Â  Â  Â  insta: document.getElementById('setInsta').value,
Â  Â  Â  Â  Â  Â  Â  Â  face: document.getElementById('setFace').value
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  await fetchAPI('/api/ayarlar', {method:'POST', body:JSON.stringify(s)});
Â  Â  Â  Â  Â  Â  alert('Ayarlar Kaydedildi!');
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>